<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Scala School - Basics continued</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link rel="stylesheet" href="bootstrap-1.1.0.min.css">

  </head>

  <body>
  
    <div class="topbar">
      <div class="fill">
        <div class="container fixed">
          <h3><a href="index.html">Basics continued</a></h3>
          
          <ul class="nav secondary-nav">
            
              <li><a href="basics.html">&laquo;Previous</a></li>
            
            
              <li><a href="collections.html">Next&raquo;</a></li>
            
          </ul>

        </div>
      </div>
    </div>

    <div class="container" style="padding-top: 60px;">
      <p>This lesson covers:</p>
<ul>
	<li>apply</li>
	<li>objects</li>
	<li>case classes</li>
	<li>update</li>
	<li>Functions are Objects</li>
	<li>packages</li>
	<li>pattern matching</li>
</ul>
<h3>apply methods</h3>
<p>apply methods give you a nice syntatic sugar for when a class or object has one main use.</p>
<pre>
object FooMaker {
  def apply() = new Foo
}

scala&gt; class Bar {
     |   def apply() = 0
     | }
defined class Bar

scala&gt; val bar = new Bar
bar: Bar = Bar@47711479

scala&gt; bar()
res8: Int = 0
</pre>
<p>Here our instance object looks like we&#8217;re calling a method. More on that later!</p>
<h3>Objects</h3>
<p>Objects are used to hold single instances of a class. Often used for factories.</p>
<pre>
object Timer {
  var count = 0

  def currentCount: Long = {
    count += 1
    count
  }
}
</pre>
<p>How to use</p>
<pre>
scala&gt; Timer.currentCount
res0: Long = 1
</pre>
<p>Classes and Objects can have the same name.  The object is called a &#8216;Companion Object&#8217;.  We commonly use Companion Objects for Factories.</p>
<p>Here is a trivial example that only serves to remove the need to use &#8216;new&#8217; to create an instance.</p>
<pre>
class Bar(foo: String)

object Bar {
  def apply(foo: String) = new Bar(foo)
}
</pre>
<h3>Case Classes</h3>
<p>case classes are used to conveniently store data with a class.  You can construct them without using new.</p>
<pre>
scala&gt; case class Bottle(color: String)
defined class Bottle

scala&gt; Bottle("Blue")
res0: Bottle = Bottle(Blue)

scala&gt; res3.color
res1: String = Blue
</pre>
<p>You will often see them used in Twitter code as record types.</p>
<p>case classes automatically have equality and nice toString methods based on the constructor arguments.</p>
<pre>
scala&gt; val blue = Bottle("Blue")
blue: Bottle = Bottle(Blue)

scala&gt; val blu = Bottle("Blue")
blu: Bottle = Bottle(Blue)

scala&gt; blue == blu
res0: Boolean = true

scala&gt; blue.equals(blu)
res1: Boolean = true
</pre>
<p>case classes can have methods.</p>
<h3>Functions are Objects</h3>
<p>In Scala, we talk about object-functional programming often.  What does that mean?</p>
<p>We saw earlier that giving your class an apply method you can use it like it&#8217;s a function.  Let&#8217;s look in the other direction.  Let&#8217;s define a simple function and see what&#8217;s under the hood.</p>
<pre>
def addOne(x: Int) = x + 1

scala&gt; addOne(1)
res0: Int = 2
</pre>
<p>Let&#8217;s partially apply it.</p>
<pre>
scala&gt; addOne _
res1: (Int) =&gt; Int = &lt;function1&gt;
</pre>
<p>Hmm, what is a function1?  A Function1 is simply a trait for a function that takes one argument.</p>
<pre>
scala&gt; val addOne = new Function1[Int, Int] {
     |   def apply(x: Int): Int = x + 1
     | }
addOne: java.lang.Object with (Int) =&gt; Int = &lt;function1&gt;

scala&gt; addOne(1)
res2: Int = 2
</pre>
<p>There is Function1 through 22.  Why 22?  It&#8217;s an arbitrary magic number.  I&#8217;ve never needed a function with more than 22 arguments so it seems to work out.</p>
<p>The syntatic sugar of apply helps unify the duality of object and functional programming.  You can pass classes around and use them as functions and functions are just instances of classes under the covers.</p>
<p>Does this mean that everytime you define a method in your class, you&#8217;re actually getting an instance of Function*?  No, methods in classes are methods.  methods defined standalone in the repl are Function* instances.</p>
<h3>Packages</h3>
<p>You can organize your code inside of packages.</p>
<pre>
package com.twitter.example
</pre>
<p>at the top of a file will declare everything in the file to be in that package.</p>
<p>Values and functions cannot be outside of a class or object.  Objects are a useful tool for organizing static functions.</p>
<pre>
package com.twitter.example

object colorHolder {
  val BLUE = "Blue"
  val RED = "Red"
}
</pre>
<p>Now you can access the members directly</p>
<pre>
println("the color is: " + com.twitter.example.colorHolder.BLUE)
</pre>
<p>Notice what the scala repl says when you define this object:</p>
<pre>
scala&gt; object colorHolder {
     |   val BLUE = "Blue"
     |   val RED = "Red"
     | }
defined module colorHolder
</pre>
<p>This gives you a small hint that the designers of Scala designed objects to be part of Scala&#8217;s module system.</p>
<h3>Pattern Matching</h3>
<p>One of the most useful parts of Scala.</p>
<p>Matching on values</p>
<pre>
val times = 1

times match {
  case 1 =&gt; "one"
  case 2 =&gt; "two"
  case _ =&gt; "some other number"
}
</pre>
<p>Matching with guards</p>
<pre>
times match {
  case i if i == 1 =&gt; "one"
  case i if i == 2 =&gt; "two"
  case _ =&gt; "some other number"
}
</pre>
<p>Notice how we captured the value in the variable &#8216;i&#8217;.</p>
<p>case classes are designed to be used with pattern matching.  Let&#8217;s expand on our bottle example from earlier.</p>
<pre>
case class Bottle(color: String, ounces: Int)

val bottle = Bottle("Blue", 20)

bottle match {
  case Bottle("Blue", ounces) =&gt; println("found a Blue bottle")
  case Bottle(color, 20) =&gt; println("found a 20 ounce bottle")
  case Bottle(color, ounces) =&gt; println("found an unknown bottle with color " + color +
                                        "that can hold " + ounces + "oz")
}
</pre>
<p>Other alternatives for that last match</p>
<pre>
  case Bottle(_, _) =&gt; println("found an unknown bottle: " + bottle)
</pre>
OR we could simply not care that it&#8217;s a Bottle

<pre>
  case _ =&gt; println("found an unknown object: " + bottle)
</pre>
OR we could re-bind the matched value with another name
<pre>
  case b@Bottle(_, _) =&gt; println("found an unknown bottle: " + b)
</pre>
    </div> <!-- /container -->

    <div id="footer">
      <div class="inner">
        <div class="container">
          <p>
            Built at <a href="http://twitter.com/twitter" target="_blank">@twitter</a> by <a href="http://twitter.com/stevej" target="_blank">@stevej</a> and <a href="http://twitter.com/marius" target="_blank">@marius</a> with much help from <a href="http://twitter.com/evanm" target="_blank">@evanm</a>, <a href="http://twitter.com/sprsquish" target="_blank">@sprsquish</a>, <a href="http://twitter.com/kevino" target="_blank">@kevino</a>, <a href="http://twitter.com/zuercher" target="_blank">@zuercher</a>, <a href="http://twitter.com/timtrueman" target="_blank">@timtrueman</a>, <a href="http://twitter.com/wickman" target="_blank">@wickman</a> and <a href="http://twitter.com/mccv" target="_blank">@mccv</a><br />
            Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License v2.0</a>.
          </p>
        </div>
      </div>
    </div>

  </body>
</html>
